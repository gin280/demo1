<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>waterfall</title>
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/waterfall.css">
	<script src="js/jquery.js"></script>
	
</head>
<body>
	<div class="container">
		<div class="box">
			<div class="pic">
				<img src="img/books/11.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/1.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/2.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/3.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/4.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/5.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/6.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/7.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/8.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/9.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/10.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/11.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/12.jpg" alt="">
			</div>
		</div>
		<div class="box">
			<div class="pic">
				<img src="img/books/13.jpg" alt="">
			</div>
		</div>
	
	</div>
<script>
	$(document).ready(function(){
	
		var dataInt = {'data':[{'src':'4.jpg'},
		{'src':'1.jpg'},{'src':'2.jpg'},{'src':'3.jpg'}]};
		$(window).scroll(function(){
			if(checkscrollside()){
				$.each(dataInt.data,function(index,value) {
					var oBox = '<div class="box"><div class="pic">'+
					'<img src="img/books/'+value.src+'">';
					$('.container').append(oBox);
				});
				
			}
		})
	});
	
function checkscrollside(){
    var $aPin = $( ".box" );
    var lastPinH = $aPin.last().get(0).offsetTop + Math.floor($aPin.last().height()/2);//创建【触发添加块框函数waterfall()】的高度：最后一个块框的距离网页顶部+自身高的一半(实现未滚到底就开始加载)
    var scrollTop = $( window ).scrollTop()//注意解决兼容性
    var documentH = $( document ).width();//页面高度
    return (lastPinH < scrollTop + documentH ) ? true : false;//到达指定高度后 返回true，触发waterfall()函数
}
</script>
</body>
</html>